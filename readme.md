# Node.jsç¯å¢ƒä¸‹ç®€å•å®ç°å¢åˆ æ”¹æŸ¥çš„RESTful API

> å‰è¨€

ä¸€ç›´åœ¨å†™å‰ç«¯çš„ä¸šåŠ¡é€»è¾‘, ä½†å¾ˆæƒ³å…¥æ‰‹Node, å†™å†™æœåŠ¡ç«¯çš„ä»£ç , æ‰€ä»¥è‡ªå·±åœ¨å·¥ä½œä¹‹ä½™, å†™äº†è¿™ä¹ˆä¸€ä¸ªå°demo, å¾ˆå¤šæ¥å£å¤§éƒ¨åˆ†éƒ½æ˜¯é’ˆå¯¹æ•°æ®çš„å¢åˆ æ”¹æŸ¥,  å®ç°äº†è¿™ä¸ªåŸºç¡€çš„åŠŸèƒ½, å¯¹äºåç»­çš„çŸ¥è¯†ç‚¹å°†ä¼šå¸®åŠ©å¾ˆå¤§, å¸Œæœ›çœ‹åˆ°è¿™ç¯‡æ–‡ç« çš„å¤§ğŸ‚, å¯ä»¥å¤šå¤šç»™äºˆå­¦ä¹ ä¸Šçš„å»ºè®®ä¸æŒ‡å¯¼å“ˆğŸ˜Š~


> ç¯å¢ƒä»‹ç»

æœ¬åœ°ï¼šMac OSX 10.11.4ï¼Œåº”ç”¨é‡‡ç”¨çš„æŠ€æœ¯ï¼šNode.js + Koa2 + Mongodb

è¿œç«¯æœåŠ¡å™¨ï¼šé˜¿é‡Œäº‘ECSï¼ˆ1æ ¸CPUã€ 2GBå†…å­˜ï¼‰ï¼ŒIPï¼šxx.104.xx.19xï¼Œç³»ç»Ÿä¸ºCentOS 7.4 64ä½

> æœ¬åœ°å’ŒæœåŠ¡å™¨ç«¯å®‰è£…å¿…è¦çš„è½¯ä»¶

å¦‚ä¸‹åº”ç”¨ï¼šNodeã€npmã€pm2ã€mongodbã€Nginx

> å¼€å‘æµç¨‹ä»‹ç»

æœ¬åœ°ä»£ç å¼€å‘æµ‹è¯•åï¼Œç„¶åé€šè¿‡pm2éƒ¨ç½²è¿œç¨‹æœåŠ¡å™¨ï¼Œå¹¶åœ¨3000ç«¯å£è¿›è¡Œç›‘å¬, ç„¶åé…ç½®Nginx, å®ç°æ¥å£ä»£ç†è½¬å‘ã€‚

>Build Setup

``` bash
# install dependencies
npm install

# Setup mongodb
mongod --dbpath XXX

# serve with hot reload at localhost:3080
node server.js or pm2 start server.js

# 4. æ¥ä¸‹æ¥çš„æ“ä½œä½ ä»¬éƒ½æ‡‚ğŸ˜~
```

## æ¥å£åˆ—è¡¨ï¼š

### 1ã€æ–°å¢ç”¨æˆ·

#### è¯·æ±‚URL:
```
http://localhost:3000/api/v1/save/  (æœ¬åœ°æ¥å£)
http://yinpeng1994.cn:3000/api/v1/find/ (é˜¿é‡Œäº‘æœåŠ¡ç«¯æ¥å£)
http://demo.yinpeng1994.cn:3000/api/v1/find/  (äºŒçº§åŸŸåè§£ææ¥å£)
```
#### è¯·æ±‚æ–¹å¼:
```
POST
```

#### å‚æ•°ç±»å‹ï¼šparam

|å‚æ•°|æ˜¯å¦å¿…é€‰|ç±»å‹|è¯´æ˜|
|:-----|:-------:|:-----|:-----|
|username Â  Â   |Y Â  Â  Â  |stringÂ  | ç”¨æˆ·å |
|password Â  Â   |Y Â  Â  Â  |stringÂ  | ç”¨æˆ·å |
#### è¿”å›ç¤ºä¾‹ï¼š

```javascript
{
    "code": 0,
    "success": "æ³¨å†ŒæˆåŠŸ"
}
```
### 2ã€åˆ é™¤ç”¨æˆ·

#### è¯·æ±‚URL:
```
http://localhost:3000/api/v1/delete/
```
#### è¯·æ±‚æ–¹å¼:
```
POST
```

#### å‚æ•°ç±»å‹ï¼šparam

|å‚æ•°|æ˜¯å¦å¿…é€‰|ç±»å‹|è¯´æ˜|
|:-----|:-------:|:-----|:-----|
|idÂ  Â   |Y Â  Â  Â  |stringÂ  | ä¸»é”®id |
#### è¿”å›ç¤ºä¾‹ï¼š

```javascript
{
    "code": 0,
    "success": "åˆ é™¤æˆåŠŸ"
}
```
### 3ã€æ›´æ–°ç”¨æˆ·

#### è¯·æ±‚URL:
```
http://localhost:3000/api/v1/update/
```
#### è¯·æ±‚æ–¹å¼:
```
POST
```

#### å‚æ•°ç±»å‹ï¼šparam

|å‚æ•°|æ˜¯å¦å¿…é€‰|ç±»å‹|è¯´æ˜|
|:-----|:-------:|:-----|:-----|
|:-----|:-------:|:-----|:-----|
|username Â  Â   |Y Â  Â  Â  |stringÂ  | ç”¨æˆ·å |
|password Â  Â   |Y Â  Â  Â  |stringÂ  | ç”¨æˆ·å |
#### è¿”å›ç¤ºä¾‹ï¼š

```javascript
{
    "code": 0,
    "success": "æ›´æ–°æˆåŠŸ"
}
```
### 4ã€æŸ¥æ‰¾ç”¨æˆ·

#### è¯·æ±‚URL:
```
http://localhost:3000/api/v1/find/
```
#### è¯·æ±‚æ–¹å¼:
```
GET
```
#### è¿”å›ç¤ºä¾‹ï¼š

```javascript
{
    "code": 0,
    "success": "æŸ¥è¯¢æˆåŠŸ"
}
```

# Features
1. æ¥ä¸‹ä¼šç»“åˆkoa2,å»å®ç°ä¸€ä¸ªå¯¹æ•°æ®çš„å¢åˆ æ”¹æŸ¥çš„æ•°æ®æ¥å£ (âœ…)

2. éƒ¨ç½²åˆ°é˜¿é‡Œäº‘, Nginxé…ç½®ä»£ç†è½¬å‘ (âœ…)

3. å®ç°ç”¨æˆ·çš„ç™»å½•æ³¨å†Œå‰åç«¯åŠŸèƒ½

4. å®ç°ç”µå•†ç½‘ç«™åŸºæœ¬åŠŸèƒ½....

5. .....
